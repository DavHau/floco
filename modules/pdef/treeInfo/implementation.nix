# ============================================================================ #
#
#
#
# ---------------------------------------------------------------------------- #

{ lib, config, ... }: {

# ---------------------------------------------------------------------------- #

  config = let

    dev' = if ( ! config.lifecycle.build ) || ( config.depInfo == {} )
           then { dev = {}; }
           else {};

    prod' = let
      rt = lib.filterAttrs ( _: v: v.runtime or false ) config.depInfo;
    in if rt == {} then { prod = {}; } else {};

  in {
    treeInfo = lib.mkDefault ( prod' // dev' );
    _export.treeInfo = lib.mkIf ( ( prod' // dev' ) != {} ) ( prod' // dev' );
  };


# ---------------------------------------------------------------------------- #

}


# ---------------------------------------------------------------------------- #
#
#
#
# ============================================================================ #
